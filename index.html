<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Drive API Image Picker</title>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="36271507132-99if5fq47omh6trfeb0van5j47c5goie.apps.googleusercontent.com.apps.googleusercontent.com">
    <script>
      var CLIENT_ID = '36271507132-99if5fq47omh6trfeb0van5j47c5goie.apps.googleusercontent.com';
      var API_KEY = 'AIzaSyAJfKxKO6ysBH1ud2uCpALNtUaDmYYsTiY';
      var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"];
      var SCOPES = 'https://www.googleapis.com/auth/drive.readonly';

      function handleClientLoad() {
        gapi.load('client:auth2', initClient);
      }

      function initClient() {
        gapi.client.init({
          apiKey: API_KEY,
          clientId: CLIENT_ID,
          discoveryDocs: DISCOVERY_DOCS,
          scope: SCOPES
        }).then(function () {
          console.log('Google Drive API client initialized');
        }, function (error) {
          console.error('Error initializing Google Drive API client', error);
        });
      }

      function openPicker() {
        gapi.auth2.getAuthInstance().signIn().then(function () {
          var picker = new google.picker.PickerBuilder()
            .addView(google.picker.ViewId.DOCS_IMAGES)
            .setOAuthToken(gapi.auth.getToken().access_token)
            .setDeveloperKey(API_KEY)
            .setCallback(pickerCallback)
            .build();
          picker.setVisible(true);
        });
      }

      function pickerCallback(data) {
        if (data.action == google.picker.Action.PICKED) {
          var file = data.docs[0];
          var fileId = file.id;
          var fileUrl = 'https://drive.google.com/uc?export=view&id=' + fileId;
          var img = document.createElement('img');
          img.src = fileUrl;
          document.body.appendChild(img);
        }
      }
    </script>
  </head>
  <body onload="handleClientLoad()">
    <h1>Google Drive API Image Picker</h1>
    <button onclick="openPicker()">Select Image</button>
  </body>
</html>
